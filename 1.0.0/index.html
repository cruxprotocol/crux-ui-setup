<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Cruxpay Setup</title>
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
	<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="./css/setup.min.css">
	<style>
		:root {
			--mdc-theme-secondary: #736df8;
			--mdc-theme-primary: #736df8;
		}
	</style>
</head>

<body>

	<div class="setup">
		<div class="mdc-card mdc-card--outlined">
			<button id="closeSetup"
				class="mdc-icon-button material-icons mdc-ripple-upgraded--unbounded mdc-ripple-upgraded setup-close_button"
				title="Close">
				close
			</button>
			<div class="setup-card cs-hide" id="registration">
				<div class="setup-card__form">
					<img src="./images/brand-logo--dark.png" alt="CruxPay" class="brand-logo">
					<div class="setup-card__headline">Create your CruxPay Account</div>
					<div class="setup-card__body">Continue to CruxPay</div>

					<form autocomplete="off">
						<input autocomplete="false" name="hidden" type="text" style="display:none;">
						<div class="text-field-container">
							<div class="mdc-text-field mdc-text-field--outlined cruxpay-id__container">
								<input class="mdc-text-field__input" id="cruxpayId" type="text">
								<div class="mdc-notched-outline">
									<div class="mdc-notched-outline__leading"></div>
									<div class="mdc-notched-outline__notch">
										<label for="text-field-hero-input" class="mdc-floating-label">CRUXPay ID</label>
									</div>
									<div class="mdc-notched-outline__trailing">
										<div class="id-status">

										</div>
									</div>
								</div>
							</div>
							<div class="mdc-text-field-helper-line">
								<p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg"
									id="cruxpay-id__helper-text">Enter a unique alphanumeric user id</p>
							</div>
							<div class="validation-rules validation-rules--cruxid">
								<div class="rule">
									<i class="material-icons">
										error_outline
									</i>
									<span>Minimum Id length is 4</span>
								</div>
								<div class="rule">
									<i class="material-icons">
										error_outline
									</i>
									<span>Maximum Id length is 20</span>
								</div>
								<div class="rule">
									<i class="material-icons">
										error_outline
									</i>
									<span>Only lowercase alphabets are allowed</span>
								</div>
								<div class="rule">
									<i class="material-icons">
										error_outline
									</i>
									<span>Only <strong>_</strong> and <strong>-</strong> special characters are
										allowed</span>
								</div>
								<div class="rule">
									<i class="material-icons">
										error_outline
									</i>
									<span>CRUX Id can start with an alphabet or number</span>
								</div>
								<div class="rule">
									<i class="material-icons">
										error_outline
									</i>
									<span>CRUX Id cannot start with special characters</span>
								</div>
							</div>
						</div>
						<div class="setup__footer setup__footer--mobile">
							<button class="mdc-button mdc-button--raised mdc-crux-action" id="createIdMobile"
								type="button">
								<span>Create ID</span>
								<span class="donut"></span>
							</button>
						</div>
					</form>
				</div>
				<div class="setup-card__description">
					<img src="./images/mobile-pay.svg" width="250" />
					<div class="setup__footer">
						<button class="mdc-button mdc-button--raised mdc-crux-action" id="createId" type="button">
							<span>Create ID</span>
							<span class="donut"></span>
						</button>
					</div>
				</div>
			</div>
			<div class="customisation cs-hide" id="customisation">
				<div class="customisation__selection">
					<img src="./images/brand-logo--dark.png" alt="CruxPay" class="brand-logo">

					<div class="customisation__description-id customisation__description--mobile">
						<div class="description-heading">
							Your CruxPay Id
						</div>
						<div class="description-id cruxpayIdName">

						</div>
					</div>
					<div class="customisation__headline">Select Currencies</div>
					<form class="customisation__search" autocomplete="off">
						<input autocomplete="false" name="hidden" type="text" style="display:none;">
						<div class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-trailing-icon">
							<input class="mdc-text-field__input" id="cruxSearchCur">
							<div class="mdc-notched-outline">
								<div class="mdc-notched-outline__leading"></div>
								<div class="mdc-notched-outline__notch">
									<label for="cruxSearchCur" class="mdc-floating-label">Search
										Currencies</label>
								</div>
								<div class="mdc-notched-outline__trailing">
									<i class="material-icons mdc-text-field__icon">search</i>
								</div>
							</div>
						</div>
					</form>
					<div class="customisation__radio-select">

					</div>
					<div class="customisation__currency-list" id="currencyContainer">

					</div>
					<div class="setup__footer setup__footer--mobile">
						<button class="mdc-button mdc-button--raised mdc-crux-action" id="updateCustomizationMobile"
							type="button">
							<span>Save</span>
							<span class="donut"></span>
						</button>
					</div>
				</div>
				<div class="customisation__description">
					<div class="customisation__description-id">
						<div class="description-heading">
							Your CruxPay Id
						</div>
						<div class="description-id cruxpayIdName">

						</div>
					</div>
					<div class="customisation__selected-currencies">
						<div class="description-heading">
							Public Currencies
						</div>
						<div class="customisation__selected-currencies-list" id="selectedCurContainer">

						</div>
					</div>
					<div class="setup__footer">
						<button class="mdc-button mdc-button--raised mdc-crux-action" id="updateCustomization"
							type="button">
							<span>Save</span>
							<span class="donut"></span>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>
		window.walletInfo;
		window.imageMapping;
		window.addEventListener('message', function (event) {
			if (event.data) {
				window.walletInfo = JSON.parse(event.data);
			}
		}, false);

		window.fetch('https://cruxpay.com/data/metadata.json').then(data => data.json()).then((response) => {
			window.imageMapping = response;
		})

		/**** FIXME ****/
		let allCurrencies = [{ assetId: "4e4d9982-3469-421b-ab60-2c0c2f05386a", symbol: "ETH", name: "Ethereum", assetType: null, decimals: 8, assetIdentifierName: null, assetIdentifierValue: null, parentAssetId: null }, { assetId: "b38a1576-a704-479b-96fa-b9a83bda7ed5", symbol: "ETC", name: "Ethereum Classic", assetType: null, decimals: 8, assetIdentifierName: null, assetIdentifierValue: null, parentAssetId: null }, { assetId: "abe0030a-d8e3-4518-879f-cd9939b7d8ab", symbol: "XRP", name: "Ripple", assetType: null, decimals: 6, assetIdentifierName: null, assetIdentifierValue: null, parentAssetId: null }, { assetId: "a6d02462-e1b0-4135-bb64-49e567217a5f", symbol: "CVC", name: "Civic", assetType: "ERC20", decimals: 8, assetIdentifierName: "Contract Address", assetIdentifierValue: "0x41e5560054824ea6b0732e656e3ad64e20e94e45", parentAssetId: "4e4d9982-3469-421b-ab60-2c0c2f05386a" }, { assetId: "0a2f3bb6-5190-4c02-85a9-5eecea9ed912", symbol: "DOGE", name: "Dogecoin", assetType: null, decimals: 8, assetIdentifierName: null, assetIdentifierValue: null, parentAssetId: null }, { assetId: "c72972bd-7e85-40b4-83e5-9634f827214e", symbol: "ADA", name: "Cardano", assetType: null, decimals: 5, assetIdentifierName: null, assetIdentifierValue: null, parentAssetId: null }, { assetId: "aae85fa5-7d6a-427c-8088-37df459d55b8", symbol: "NEO", name: "NEO", assetType: "NEOGoverningToken", decimals: 18, assetIdentifierName: "Asset ID", assetIdentifierValue: "c56f33fc6ecfcd0c225c4ab356fee59390af8560be0e930faebe74a6daff7c9b", parentAssetId: null }, { assetId: "af9c0656-580e-4700-bec8-13d24d2ead87", symbol: "ONT", name: "Ontology", assetType: null, decimals: 1, assetIdentifierName: null, assetIdentifierValue: null, parentAssetId: null }];
		window.walletInfo = {
			cruxIDSubdomain: '', // This field is used to determine state - ID Registration or Public Currencies Configuration
			suggestedCruxIDSubdomain: 'amitasaurus', // If cruxIDSubdomain is empty('' or null) then show prefilled suggestedCruxIDSubdomain in input.
			walletClientName: 'zel',
			availableCurrencies: { btc: "3LoJFcGiBgCzy235poxmq8uZGFGSK3ZbJN", eth: "0x501906Ce564be7bA80Eb55A29EE31ECfaE41b6f2", xrp: "rhVWrjB9EGDeK4zuJ1x2KXSjjSpsDQSaU6", neo: "AdpCh7w8cLdWWztRmqj1MbUtGgBfkn3Tx9", ada: "DdzFFzCqrhsjouCxmJaUN2Y5GoHuei5cA41jCHmxyKUfWD2jKmjujKnNKJb5pUkjHCiujxZPcgyMK1Mhrq2GBy1RGnBA91Cu5VdnFL9M" },
			publicAddressCurrencies: ['btc', 'eth', 'neo'],
			assetList: allCurrencies,
			theme: '#3742fa',
			experience: 'iframe',
			subdomainRegistrar: 'https://registrar.cruxpay.com',
			clientMapping: { eth: "4e4d9982-3469-421b-ab60-2c0c2f05386a", etc: "b38a1576-a704-479b-96fa-b9a83bda7ed5", xrp: "abe0030a-d8e3-4518-879f-cd9939b7d8ab", cvc: "a6d02462-e1b0-4135-bb64-49e567217a5f", doge: "0a2f3bb6-5190-4c02-85a9-5eecea9ed912", ada: "c72972bd-7e85-40b4-83e5-9634f827214e", neo: "aae85fa5-7d6a-427c-8088-37df459d55b8", ont: "af9c0656-580e-4700-bec8-13d24d2ead87" }
		}
        /**** End of FIXME ****/
	</script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"
		integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<script>window.isDev=false</script>
<!-- %PUBLIC:BUILD% -->
	<script src="./js/setup.min.js"></script>
</body>

</html>
